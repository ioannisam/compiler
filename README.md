# Compiler

This project implements a compiler for a simple programming language, supporting basic statements and expressions.    

## Tools

- **Bison**: Parser generator for LALR(1) context-free grammars
- **Flex**: Lexical analyzer generator using regular expressions
- **GCC**: Compiler for building the executable

## Features

### Lexer
- Recognizes keywords (`print`, `if`, `else`, `while`)
- Identifiers, numbers, strings
- Operators: `=`, `==`, `<`, `>`, `>>`, `<<`, `!`, `&`, `|`, `^`, `+`, `-`, `*`, `/`
- Special characters: `;`, `(`, `)`, `{`, `}`
- Ignores whitespace and C-style comments (`/* ... */`)

### Parser
- Supports:
   - `print` statements
   - `if`/`else` conditionals
   - `while` loops
   - Variable assignments
   - Arithmetic and comparison operations
- Error handling for syntax issues
- Builds an **Abstract Syntax Tree (AST)** for semantic analysis.

## Files

### Core Components
   - `parser.y`: Bison parser definition (grammar rules).
   - `lang.l`: Flex lexer definition (token rules).
   - `ast.h`: AST node declarations (types, structures, and utilities).
   - `ast.c`: AST implementation (node constructors and traversal logic).

### Generated Files
   - `parser.tab.c` / `parser.tab.h`: Parser code generated by `Bison`.
   - `lex.yy.c`: Lexer code generated by `Flex`.

### Configuration
   - `.gitignore`: Excludes generated files (`parser.tab.*`, `lex.yy.c`, `bin/`).
   - `test/`: Example input files for testing.

### Documentation
   - `README.md`: Project overview and usage guide.
   - `LICENSE`: Contains the GNU General Public License (GPLv3).
## How to Build

In order to build, you will need to install both **Bison** and **Flex**:
   ```bash
   sudo pacman -S bison flex
   ```
   *(Use the package manager specific to your Operating System)*

### Script

You can use the provided *script* `build/utils.sh` to automate the build process. The script supports the following commands:

- **`generate`**: Generates the parser and lexer files using `bison` and `flex`.
- **`compile`**: Generates the files (if not already generated) and compiles them into an executable binary.
- **`run`**: Generates, compiles and runs the executable interactively.
- **`example`**: Runs the executable with a predefined example input (`print "Hello, World!";`).
- **`clean`**: Removes all generated files and the compiled binary.

Example:
   ```bash
   ./build/utils.sh example
   ```

### Manual

You can instead opt to build the project *manually*:

1. Generate parser files:
   ```bash
   bison -d -o src/parser/parser.tab.c --header=include/parser.tab.h src/parser/parser.y
   ```
2. Generate lexer file:
   ```bash
   flex -o src/lexer/lex.yy.c src/lexer/lang.l
   ```
3. Compile executable `compiler`:
   ```bash
   gcc -o bin/compiler -Iinclude src/lexer/lex.yy.c src/parser/parser.tab.c src/parser/ast.c -lfl
   ```
4. Run executable `compiler`:
   ```bash
   ./bin/compiler test/test0.txt
   ```
   *to run an example*
   ```bash
   ./bin/compiler /dev/stdin
   ```
   *to run interactively*

- **Valid example:**
   ```bash
   Input:
      print "Hello, World!";
   Expected Output:
      PRINT STRING(Hello, World!) SEMICOLON 

      Abstract Syntax Tree:
      PRINT
         STR(Hello, World!)
   ```

- **Error example:**
   ```bash
   Input:
      print "No Semicolon"
   Expected Output:
      Syntax error at line 1: syntax error (near 'end of input')
      PRINT STRING(No semicolon) [ble: EOF]
   ```